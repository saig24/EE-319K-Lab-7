


ARM Macro Assembler    Page 1 


    1 00000000         ; Print.s
    2 00000000         ; Student names: John Sigmon and Neel Kattumadam
    3 00000000         ; Last modification date: change this to the last modifi
                       cation date or look very silly
    4 00000000         ; Runs on LM4F120 or TM4C123
    5 00000000         ; EE319K lab 7 device driver for any LCD
    6 00000000         ;
    7 00000000         ; As part of Lab 7, students need to implement these LCD
                       _OutDec and LCD_OutFix
    8 00000000         ; This driver assumes two low-level LCD functions
    9 00000000         ; ST7735_OutChar   outputs a single 8-bit ASCII characte
                       r
   10 00000000         ; ST7735_OutString outputs a null-terminated string 
   11 00000000         
   12 00000000 00000000 
                       DATA    EQU              0
   13 00000000 00002710 
                       NUM     EQU              10000
   14 00000000                 IMPORT           ST7735_OutChar
   15 00000000                 IMPORT           ST7735_OutString
   16 00000000                 EXPORT           LCD_OutDec
   17 00000000                 EXPORT           LCD_OutFix
   18 00000000         
   19 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   20 00000000                 PRESERVE8
   21 00000000                 THUMB
   22 00000000         
   23 00000000         
   24 00000000         
   25 00000000         ;-----------------------LCD_OutDec----------------------
                       -
   26 00000000         ; Output a 32-bit number in unsigned decimal format
   27 00000000         ; Input: R0 (call by value) 32-bit unsigned number
   28 00000000         ; Output: none
   29 00000000         ; Invariables: This function must not permanently modify
                        registers R4 to R11
   30 00000000         
   31 00000000         LCD_OutDec
   32 00000000 46F4            MOV              R12,R14
   33 00000002 F04F 0100       MOV              R1,#0
   34 00000006 B402            PUSH             {R1}
   35 00000008 F04F 030A       MOV              R3,#10
   36 0000000C         Loop
   37 0000000C FBB0 F1F3       UDIV             R1,R0,R3
   38 00000010 FB01 F203       MUL              R2,R1,R3
   39 00000014 EBA0 0202       SUB              R2,R0,R2
   40 00000018 F102 0230       ADD              R2,#0x30
   41 0000001C B404            PUSH             {R2}
   42 0000001E 4608            MOV              R0,R1
   43 00000020 2800            CMP              R0,#0
   44 00000022 D1F3            BNE              Loop
   45 00000024         
   46 00000024         Next
   47 00000024 BC01            POP              {R0}
   48 00000026 2800            CMP              R0,#0
   49 00000028 D002            BEQ              Done
   50 0000002A F7FF FFFE       BL               ST7735_OutChar
   51 0000002E E7F9            B                Next



ARM Macro Assembler    Page 2 


   52 00000030         
   53 00000030         Done
   54 00000030 46E6            MOV              R14,R12
   55 00000032         
   56 00000032 4770            BX               LR
   57 00000034         
   58 00000034         ;* * * * * * * * End of LCD_OutDec * * * * * * * *
   59 00000034         
   60 00000034         ; -----------------------LCD _OutFix--------------------
                       --
   61 00000034         ; Output characters to LCD display in fixed-point format
                       
   62 00000034         ; unsigned decimal, resolution 0.001, range 0.000 to 9.9
                       99
   63 00000034         ; Inputs:  R0 is an unsigned 32-bit number
   64 00000034         ; Outputs: none
   65 00000034         ; E.g., R0=0,    then output "0.000 "
   66 00000034         ;       R0=3,    then output "0.003 "
   67 00000034         ;       R0=89,   then output "0.089 "
   68 00000034         ;       R0=123,  then output "0.123 "
   69 00000034         ;       R0=9999, then output "9.999 "
   70 00000034         ;       R0>9999, then output "*.*** "
   71 00000034         ; Invariables: This function must not permanently modify
                        registers R4 to R11
   72 00000034         LCD_OutFix
   73 00000034 F242 7110       LDR              R1,=NUM
   74 00000038 4288            CMP              R0, R1
   75 0000003A D223            BHS              Large
   76 0000003C         
   77 0000003C F04F 030A       MOV              R3, #10
   78 00000040 F04F 0C04       MOV              R12, #4
   79 00000044         NZero
   80 00000044 FBB0 F1F3       UDIV             R1, R0, R3
   81 00000048 FB01 F203       MUL              R2, R1, R3
   82 0000004C EBA0 0202       SUB              R2, R0, R2
   83 00000050 F102 0230       ADD              R2, #0x30
   84 00000054 B404            PUSH             {R2}
   85 00000056 4608            MOV              R0, R1
   86 00000058 F1BC 0C01       SUBS             R12, #1
   87 0000005C D1F2            BNE              NZero
   88 0000005E         
   89 0000005E 46F4            MOV              R12,R14
   90 00000060 BC01            POP              {R0}
   91 00000062 F7FF FFFE       BL               ST7735_OutChar
   92 00000066 F04F 002E       LDR              R0, =0x2E
   93 0000006A F7FF FFFE       BL               ST7735_OutChar
   94 0000006E BC01            POP              {R0}
   95 00000070 F7FF FFFE       BL               ST7735_OutChar
   96 00000074 BC01            POP              {R0}
   97 00000076 F7FF FFFE       BL               ST7735_OutChar
   98 0000007A BC01            POP              {R0}
   99 0000007C F7FF FFFE       BL               ST7735_OutChar
  100 00000080 46E6            MOV              R14,R12
  101 00000082         
  102 00000082 4770            BX               LR
  103 00000084         Large
  104 00000084 F04F 002A       LDR              R0, =0x2A
  105 00000088 46F4            MOV              R12,R14
  106 0000008A F7FF FFFE       BL               ST7735_OutChar



ARM Macro Assembler    Page 3 


  107 0000008E F04F 002E       LDR              R0, =0x2E
  108 00000092 F7FF FFFE       BL               ST7735_OutChar
  109 00000096 F04F 002A       LDR              R0, =0x2A
  110 0000009A F7FF FFFE       BL               ST7735_OutChar
  111 0000009E F04F 002A       LDR              R0, =0x2A
  112 000000A2 F7FF FFFE       BL               ST7735_OutChar
  113 000000A6 F04F 002A       LDR              R0, =0x2A
  114 000000AA F7FF FFFE       BL               ST7735_OutChar
  115 000000AE 46E6            MOV              R14,R12
  116 000000B0         
  117 000000B0 4770            BX               LR
  118 000000B2         
  119 000000B2 00 00           ALIGN
  120 000000B4         ;* * * * * * * * End of LCD_OutFix * * * * * * * *
  121 000000B4         
  122 000000B4                 ALIGN                        ; make sure the end
                                                             of this section is
                                                             aligned
  123 000000B4                 END                          ; end of file
Command Line: --debug --xref --cpu=Cortex-M4 --apcs=interwork --depend=.\print.
d -o.\print.o -IC:\Keil\ARM\RV31\INC -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\
Inc\Luminary --predefine="__EVAL SETA 1" --list=.\print.lst Print.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 19 in file Print.s
   Uses
      None
Comment: .text unused
Done 00000030

Symbol: Done
   Definitions
      At line 53 in file Print.s
   Uses
      At line 49 in file Print.s
Comment: Done used once
LCD_OutDec 00000000

Symbol: LCD_OutDec
   Definitions
      At line 31 in file Print.s
   Uses
      At line 16 in file Print.s
Comment: LCD_OutDec used once
LCD_OutFix 00000034

Symbol: LCD_OutFix
   Definitions
      At line 72 in file Print.s
   Uses
      At line 17 in file Print.s
Comment: LCD_OutFix used once
Large 00000084

Symbol: Large
   Definitions
      At line 103 in file Print.s
   Uses
      At line 75 in file Print.s
Comment: Large used once
Loop 0000000C

Symbol: Loop
   Definitions
      At line 36 in file Print.s
   Uses
      At line 44 in file Print.s
Comment: Loop used once
NZero 00000044

Symbol: NZero
   Definitions
      At line 79 in file Print.s
   Uses
      At line 87 in file Print.s
Comment: NZero used once
Next 00000024

Symbol: Next



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 46 in file Print.s
   Uses
      At line 51 in file Print.s
Comment: Next used once
8 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

DATA 00000000

Symbol: DATA
   Definitions
      At line 12 in file Print.s
   Uses
      None
Comment: DATA unused
NUM 00002710

Symbol: NUM
   Definitions
      At line 13 in file Print.s
   Uses
      At line 73 in file Print.s
Comment: NUM used once
2 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

ST7735_OutChar 00000000

Symbol: ST7735_OutChar
   Definitions
      At line 14 in file Print.s
   Uses
      At line 50 in file Print.s
      At line 91 in file Print.s
      At line 93 in file Print.s
      At line 95 in file Print.s
      At line 97 in file Print.s
      At line 99 in file Print.s
      At line 106 in file Print.s
      At line 108 in file Print.s
      At line 110 in file Print.s
      At line 112 in file Print.s
      At line 114 in file Print.s

ST7735_OutString 00000000

Symbol: ST7735_OutString
   Definitions
      At line 15 in file Print.s
   Uses
      None
Comment: ST7735_OutString unused
2 symbols
343 symbols in table
